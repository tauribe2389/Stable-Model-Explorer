{% extends "base.html" %}
{% block content %}
{% set current_tab = 'registry' %}
{% include "_analysis_tabs.html" %}
<div class="panel">
  <h2>Model Registry</h2>
  <p>Response: <span class="mono">{{ config.response }}</span></p>
  <p><a href="{{ url_for('sme.run_models', analysis_id=analysis.id) }}">Run models</a></p>
</div>

<div class="panel">
  <p>Total candidates: <strong>{{ registry|length }}</strong></p>
  <table data-sortable="true">
    <tr>
      <th data-sort-type="numeric">#</th>
      <th data-sort-type="text">Group</th>
      <th data-sort-type="numeric">Base #</th>
      <th data-sort-type="text">Class</th>
      <th data-sort-type="text">Formula</th>
      <th data-sort-type="text">Included Terms</th>
      <th data-sort-type="text">Interactions</th>
      <th data-sort-type="text">Status</th>
    </tr>
    {% for m in registry %}
      <tr>
        <td>{{ m.model_idx }}</td>
        <td class="mono">{{ m.group_key }}</td>
        <td>{{ m.base_model_idx }}</td>
        <td>{{ m.model_class }}</td>
        <td class="mono">{{ m.formula }}</td>
        <td>{{ m.included_terms|join(', ') }}</td>
        <td>{{ m.interactions|join(', ') }}</td>
        <td>{{ m.status }}</td>
      </tr>
    {% endfor %}
  </table>
</div>
{% endblock %}
